{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nimport Swal from 'sweetalert2';\nimport axios from 'axios'; // Asegúrate de ajustar la ruta según la ubicación real de tu archivo axios.js\n\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    nombreUsuario: \"\",\n    token: null\n  },\n  mutations: {\n    login(state, {\n      nombreUsuario,\n      token\n    }) {\n      state.nombreUsuario = nombreUsuario;\n      state.token = token;\n      localStorage.setItem('nombreUsuario', nombreUsuario);\n      localStorage.setItem('token', token);\n      Swal.fire({\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Sesión iniciada\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    },\n    logout(state) {\n      state.nombreUsuario = \"\";\n      state.token = null;\n      localStorage.removeItem('nombreUsuario');\n      localStorage.removeItem('token');\n      Swal.fire({\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Hasta luego\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    },\n    initializeStore(state) {\n      if (localStorage.getItem('nombreUsuario')) {\n        state.nombreUsuario = localStorage.getItem('nombreUsuario');\n      }\n      if (localStorage.getItem('token')) {\n        state.token = localStorage.getItem('token');\n      }\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, {\n      nombreUsuario,\n      contraseña\n    }) {\n      try {\n        const response = await axios.post('http://localhost:5038/api/usuarios/login', {\n          nombreUsuario,\n          contraseña\n        });\n        const token = response.data.token.token;\n\n        // Llama a la mutación para actualizar el estado con el nombre de usuario y el token\n        commit('login', {\n          nombreUsuario,\n          token\n        });\n\n        // Devuelve la respuesta para que puedas verificar `response.success` en el componente\n        return response.data;\n      } catch (error) {\n        console.error(\"Error en el inicio de sesión:\", error);\n        // Manejo de errores, por ejemplo, mostrar un mensaje de error al usuario\n        throw error;\n      }\n    },\n    logout({\n      commit\n    }) {\n      commit('logout');\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","Swal","axios","use","Store","state","nombreUsuario","token","mutations","login","localStorage","setItem","fire","position","icon","title","showConfirmButton","timer","logout","removeItem","initializeStore","getItem","actions","commit","contraseña","response","post","data","error","console"],"sources":["/home/lennux/Documentos/UT TICS/APPS/ui/ui/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport Swal from 'sweetalert2';\nimport axios from 'axios'; // Asegúrate de ajustar la ruta según la ubicación real de tu archivo axios.js\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    nombreUsuario: \"\",\n    token: null,\n  },\n  mutations: {\n    login(state, { nombreUsuario, token }) {\n      state.nombreUsuario = nombreUsuario;\n      state.token = token;\n      localStorage.setItem('nombreUsuario', nombreUsuario);\n      localStorage.setItem('token', token);\n      Swal.fire({\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Sesión iniciada\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    },\n    logout(state) {\n      state.nombreUsuario = \"\";\n      state.token = null;\n      localStorage.removeItem('nombreUsuario');\n      localStorage.removeItem('token');\n      Swal.fire({\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Hasta luego\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    },\n    initializeStore(state) {\n      if (localStorage.getItem('nombreUsuario')) {\n        state.nombreUsuario = localStorage.getItem('nombreUsuario');\n      }\n      if (localStorage.getItem('token')) {\n        state.token = localStorage.getItem('token');\n      }\n    },\n  },\n  actions: {\n    async login({ commit }, { nombreUsuario, contraseña }) {\n      try {\n        const response = await axios.post('http://localhost:5038/api/usuarios/login', { nombreUsuario, contraseña });\n  \n        const token = response.data.token.token;\n  \n        // Llama a la mutación para actualizar el estado con el nombre de usuario y el token\n        commit('login', { nombreUsuario, token });\n  \n        // Devuelve la respuesta para que puedas verificar `response.success` en el componente\n        return response.data;\n      } catch (error) {\n        console.error(\"Error en el inicio de sesión:\", error);\n        // Manejo de errores, por ejemplo, mostrar un mensaje de error al usuario\n        throw error;\n      }\n    },\n    logout({ commit }) {\n      commit('logout');\n    },\n  },\n});\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,KAAK,MAAM,OAAO,CAAC,CAAC;;AAE3BH,GAAG,CAACI,GAAG,CAACH,IAAI,CAAC;AAEb,eAAe,IAAIA,IAAI,CAACI,KAAK,CAAC;EAC5BC,KAAK,EAAE;IACLC,aAAa,EAAE,EAAE;IACjBC,KAAK,EAAE;EACT,CAAC;EACDC,SAAS,EAAE;IACTC,KAAKA,CAACJ,KAAK,EAAE;MAAEC,aAAa;MAAEC;IAAM,CAAC,EAAE;MACrCF,KAAK,CAACC,aAAa,GAAGA,aAAa;MACnCD,KAAK,CAACE,KAAK,GAAGA,KAAK;MACnBG,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEL,aAAa,CAAC;MACpDI,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;MACpCN,IAAI,CAACW,IAAI,CAAC;QACRC,QAAQ,EAAE,SAAS;QACnBC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,iBAAiB;QACxBC,iBAAiB,EAAE,KAAK;QACxBC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ,CAAC;IACDC,MAAMA,CAACb,KAAK,EAAE;MACZA,KAAK,CAACC,aAAa,GAAG,EAAE;MACxBD,KAAK,CAACE,KAAK,GAAG,IAAI;MAClBG,YAAY,CAACS,UAAU,CAAC,eAAe,CAAC;MACxCT,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;MAChClB,IAAI,CAACW,IAAI,CAAC;QACRC,QAAQ,EAAE,SAAS;QACnBC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,aAAa;QACpBC,iBAAiB,EAAE,KAAK;QACxBC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ,CAAC;IACDG,eAAeA,CAACf,KAAK,EAAE;MACrB,IAAIK,YAAY,CAACW,OAAO,CAAC,eAAe,CAAC,EAAE;QACzChB,KAAK,CAACC,aAAa,GAAGI,YAAY,CAACW,OAAO,CAAC,eAAe,CAAC;MAC7D;MACA,IAAIX,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC,EAAE;QACjChB,KAAK,CAACE,KAAK,GAAGG,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC;MAC7C;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMb,KAAKA,CAAC;MAAEc;IAAO,CAAC,EAAE;MAAEjB,aAAa;MAAEkB;IAAW,CAAC,EAAE;MACrD,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,IAAI,CAAC,0CAA0C,EAAE;UAAEpB,aAAa;UAAEkB;QAAW,CAAC,CAAC;QAE5G,MAAMjB,KAAK,GAAGkB,QAAQ,CAACE,IAAI,CAACpB,KAAK,CAACA,KAAK;;QAEvC;QACAgB,MAAM,CAAC,OAAO,EAAE;UAAEjB,aAAa;UAAEC;QAAM,CAAC,CAAC;;QAEzC;QACA,OAAOkB,QAAQ,CAACE,IAAI;MACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACrD;QACA,MAAMA,KAAK;MACb;IACF,CAAC;IACDV,MAAMA,CAAC;MAAEK;IAAO,CAAC,EAAE;MACjBA,MAAM,CAAC,QAAQ,CAAC;IAClB;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}